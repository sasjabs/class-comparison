# Инструкция по использованию инструмента

*Для работы инструмента Cross требуется среда **Python 3.5+** с установленным пакетом **OSGeo**. \
Подойдёт в т.ч. встроенная Python-среда **QGIS 3.0+**. \
Также для работы необходим файл **qml_template.qml**, из него формируется файл стиля слоя QGIS для выходного растра*

Требования к исходным данным:
1. Все входные растры должны быть иметь формат GeoTiff.
2. Все входные растры должны иметь одну систему координат - предпочтительно, спроецированную. В случае использования географической системы координат (широта, долгота) полученные площади ячеек будут некорректны.
4. Все входные растры должны быть категориальными и иметь целочисленный тип данных.

## Инструкция по работе с инструментом во встроенной среде QGIS
1. Поместить файлы **qgis_cross.py**, **Cross.py**, **qml_template.qml**, а также исходные данные и рабочий проект QGIS в рабочую директорию.
2. Открыть проект QGIS.
3. Открыть **qgis_cross.py** во встроенном редакторе кода QGIS (*Консоль Python > Редактор > Открыть скрипт...*)
4. Задать рабочую директорию, в которой лежат все файлы (строка 3):
```python
wdir = 'C:/path/to/the/working/directory'
```
5. Задать входные параметры инструмента (строки 10-12):
```python
rasters = ['data/Class1.tif', 'data/Class2.tif'] # исходные растры - их количество может быть произвольным
outputRaster = 'output/CrossMap.tif' # путь к выходному растру
outputTable = 'output/CrossTable.csv' # путь к выходной таблице
```
6. Запустить программу (*Выполнить сценарий*). 
7. После расчёта новый слой и таблица автоматически добавятся на интерфейс текущего проекта. 

## Инструкция по работе с инструментом в Jupyter Notebook или другой IDE
1. Поместить файлы **Cross.py** и **qml_template.qml**, а также исходные данные в рабочую директорию.
2. Создать исполняемый файл **.py** или **.ipynb** (примеры - **demo.py** и **demo.ipynb**) в рабочей директории.
3. Импортировать класс `Cross` из файла **Cross.py**: 
```python
from Cross import Cross
```
4. Создать экземпляр класса Cross:
```python
cr = Cross()
```
5. Задать входные параметры инструмента:
```python
rasters = ['data/Class1.tif', 'data/Class2.tif'] # исходные растры - их количество может быть произвольным
outputRaster = 'output/CrossMap.tif' # путь к выходному растру
outputTable = 'output/CrossTable.csv' # путь к выходной таблице
```
6. Выполнить расчёт:
```python
cr.Execute(rasters, outputRaster, outputTable)
```
